<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Checkout and Shipping</title>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
   <link rel="stylesheet" href="style.css">
</head>

<body>
   <div class="container">
      <!--progress bar-->
      <div class="progress-steps mt-4">
         <div class="step completed">
            <div class="step-number">1</div>
            <div class="step-label">Cart</div>
         </div>
         <div class="step active">
            <div class="step-number">2</div>
            <div class="step-label">Shipping</div>
         </div>
         <div class="step">
            <div class="step-number">3</div>
            <div class="step-label">Payment</div>
         </div>
         <div class="step">
            <div class="step-number">4</div>
            <div class="step-label">Confirmation</div>
         </div>
      </div>

      <div class="row">
         <div class="col-lg-8">
            <div class="Shipping-container">
               <div class="Shipping-header">
                  <h2> Shipping Information </h2>
                  <p class="text-muted"> Please provide your shipping details</p>
               </div>

               <!--shipping address form-->
               <div class="form-section">
                  <h3>Shipping Address</h3>
                  <form id="shippingForm">
                     <div class="row mb-3">
                        <div class="col-md-6">
                           <label for="firstName" class="form-label">First Name</label>
                           <input type="text" class="form-control" id="firstName" required>
                        </div>
                        <div class="col-md-6">
                           <label for="lastName" class="form-label">Last Name</label>
                           <input type="text" class="form-control" id="lastName" required>
                        </div>
                     </div>
                     <div class="mb-3">
                        <label for="address" class="form-label">Address</label>
                        <input type="text" class="form-control" id="address" required>
                     </div>
                     <div class="row mb-3">
                        <div class="col-md-6">
                           <label for="city" class="form-label">City</label>
                           <input type="text" class="form-control" id="city" required>
                        </div>
                        <div class="col-md-3">
                           <label for="state" class="form-label">State</label>
                           <select class="form-select" id="state" required>
                                 <option value="">Select</option>
                                 <option value="">Select</option>
                                 <option value="AL">Alabama</option>
                                 <option value="AK">Alaska</option>
                                 <option value="AZ">Arizona</option>
                                 <option value="AR">Arkansas</option>
                                 <option value="CA">California</option>
                                 <option value="CO">Colorado</option>
                                 <option value="CT">Connecticut</option>
                                 <option value="DE">Delaware</option>
                                 <option value="FL">Florida</option>
                                 <option value="GA">Georgia</option>
                                 <option value="HI">Hawaii</option>
                                 <option value="ID">Idaho</option>
                                 <option value="IL">Illinois</option>
                                 <option value="IN">Indiana</option>
                                 <option value="IA">Iowa</option>
                                 <option value="KS">Kansas</option>
                                 <option value="KY">Kentucky</option>
                                 <option value="LA">Louisiana</option>
                                 <option value="ME">Maine</option>
                                 <option value="MD">Maryland</option>
                                 <option value="MA">Massachusetts</option>
                                 <option value="MI">Michigan</option>
                                 <option value="MN">Minnesota</option>
                                 <option value="MS">Mississippi</option>
                                 <option value="MO">Missouri</option>
                                 <option value="MT">Montana</option>
                                 <option value="NE">Nebraska</option>
                                 <option value="NV">Nevada</option>
                                 <option value="NH">New Hampshire</option>
                                 <option value="NJ">New Jersey</option>
                                 <option value="NM">New Mexico</option>
                                 <option value="NY">New York</option>
                                 <option value="NC">North Carolina</option>
                                 <option value="ND">North Dakota</option>
                                 <option value="OH">Ohio</option>
                                 <option value="OK">Oklahoma</option>
                                 <option value="OR">Oregon</option>
                                 <option value="PA">Pennsylvania</option>
                                 <option value="RI">Rhode Island</option>
                                 <option value="SC">South Carolina</option>
                                 <option value="SD">South Dakota</option>
                                 <option value="TN">Tennessee</option>
                                 <option value="TX">Texas</option>
                                 <option value="UT">Utah</option>
                                 <option value="VT">Vermont</option>
                                 <option value="VA">Virginia</option>
                                 <option value="WA">Washington</option>
                                 <option value="WV">West Virginia</option>
                                 <option value="WI">Wisconsin</option>
                                 <option value="WY">Wyoming</option>
                               </select>
                        </div>
                        <div class="col-md-3">
                           <label for="zipCode" class="form-label">ZIP Code</label>
                           <input type="text" class="form-control" id="zipCode" required>
                        </div>
                     </div>
                     <div class="mb-3">
                        <label for="email" class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="email" required>
                        <small class="text-muted">For order confirmation and returns</small>
                     </div>
                     <div class="form-check mt-2">
                        <input class="form-check-input" type="checkbox" id="saveAddress">
                        <label class="form-check-label" for="saveAddress">
                         Save this address for future orders
                       </label>
                     </div>
                  </form>
               </div>

               

               <!--shipping -->
               <div class="form-section">
                  <h3>Shipping Method</h3>
                  <div class="mb-3">
                     <div class="shipping-option mb-2 p-3" onclick="selectShippingMethod('standard')">
                        <div class="fw-bold">Standard Shipping</div>
                        <span class="text-muted">3-5 business days - $5.99</span>
                     </div>

                     <div class="shipping-option mb-2 p-3" onclick="selectShippingMethod('express')">
                        <div class="fw-bold">Express Shipping</div>
                        <span class="text-muted">2-3 business days - $12.99</span>
                     </div>

                     <div class="shipping-option p-3" onclick="selectShippingMethod('overnight')">
                        <div class="fw-bold">Overnight Shipping</div>
                        <span class="text-muted">Next business day - $24.99</span>
                     </div>
                  </div>
               </div>

               <!-- Shipping Carrier Section -->
               <div class="form-section">
                  <h3>Shipping Carrier</h3>
                  <div class="row g-3">
                     <div class="col-md-4">
                        <div class="shipping-option text-center p-3" onclick="selectShippingCarrier('usps')">
                           <img src="https://uspsblog.com/wp-content/uploads/2015/11/USPS_Eagle-Symbol-web-size.png"
                     alt="USPS" style="height: 40px; margin-bottom: 10px;">
                           <div class="fw-bold">USPS</div>
                        </div>
                     </div>

                     <div class="col-md-4">
                        <div class="shipping-option text-center p-3" onclick="selectShippingCarrier('ups')">
                           <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/United_Parcel_Service_logo_2014.svg/1200px-United_Parcel_Service_logo_2014.svg.png"
                     alt="UPS" style="height: 40px; margin-bottom: 10px;">
                           <div class="fw-bold">UPS</div>
                        </div>
                     </div>

                     <div class="col-md-4">
                        <div class="shipping-option text-center p-3" onclick="selectShippingCarrier('fedex')">
                           <img src="https://cdn.sanity.io/images/kts928pd/production/c423a9d143ae2a03c1e7076e9abf851a19fceaec-1600x900.png"
                     alt="FedEx" style="height: 40px; margin-bottom: 10px;">
                           <div class="fw-bold">FedEx</div>
                        </div>
                     </div>
                  </div>
               </div>


               <div class="d-flex justify-content-between mt-4">
                  <a href="cart.html" class="btn btn-outline-secondary">Back to Cart</a>
                  <button type="button" class="btn btn-primary" onclick="proceedToPayment()">Continue to Payment</button>
               </div>
            </div>
         </div>

         <!--order summary-->
         <div class="col-lg-4">
            <div class="cart-summary">
               <h4>Order Summary</h4>
               <div id="orderItems">
                  <!-- Cart items will be loaded here -->
               </div>
               <hr>
               <div class="d-flex justify-content-between mb-2">
                  <span>Subtotal:</span>
                  <span id="subtotal">$0.00</span>
               </div>
               <div class="d-flex justify-content-between mb-2">
                  <span>Tax (6%):</span>
                  <span id="tax">$0.00</span>
               </div>
               <div class="d-flex justify-content-between mb-2">
                  <span>Shipping:</span>
                  <span id="shippingCost">$5.99</span>
               </div>
               <hr>
               <div class="d-flex justify-content-between fw-bold">
                  <span>Total:</span>
                  <span id="orderTotal">$0.00</span>
               </div>
            </div>
         </div>
      </div>
   </div>

   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
   <script>
      // Track selections
    let currentShippingMethod = null;
    let currentShippingCarrier = null;
    let cartSubtotal = 0;

    function selectShippingMethod(method) {
        // Remove highlight from all shipping method options
        document.querySelectorAll('.shipping-option').forEach(option => {
            if (option.closest('.form-section').querySelector('h3').textContent === 'Shipping Method') {
                option.classList.remove('selected');
            }
        });

        // Highlight selected option
        event.currentTarget.classList.add('selected');
        currentShippingMethod = method;

        // Update shipping cost in summary
        updateShippingCost();
    }

    function selectShippingCarrier(carrier) {
        // Remove highlight from all carrier options
        document.querySelectorAll('.shipping-option').forEach(option => {
            if (option.closest('.form-section').querySelector('h3').textContent === 'Shipping Carrier') {
                option.classList.remove('selected');
            }
        });

        // Highlight selected option
        event.currentTarget.classList.add('selected');
        currentShippingCarrier = carrier;
    }

    function updateShippingCost() {
        let shippingCost = 0;
        if (currentShippingMethod === 'standard') shippingCost = 5.99;
        if (currentShippingMethod === 'express') shippingCost = 12.99;
        if (currentShippingMethod === 'overnight') shippingCost = 24.99;

        document.getElementById('shippingCost').textContent = `$${shippingCost.toFixed(2)}`;
        updateOrderTotal();
    }

    function calculateTax(subtotal) {
        return subtotal * 0.06; // 6% tax
    }

    function updateOrderTotal() {
        const subtotal = parseFloat(document.getElementById('subtotal').textContent.replace('$', ''));
        const shipping = parseFloat(document.getElementById('shippingCost').textContent.replace('$', ''));
        const tax = calculateTax(subtotal);
        
        document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
        
        const total = subtotal + tax + shipping;
        document.getElementById('orderTotal').textContent = `$${total.toFixed(2)}`;
    }

    function proceedToPayment() {
        const form = document.getElementById('shippingForm');
        if (!form.checkValidity()) {
            alert('Please fill out all required shipping information.');
            return;
        }
        
        
        if (!currentShippingMethod || !currentShippingCarrier) {
            alert('Please select both a shipping method and carrier');
            return;
        }

        
        // Collect shipping data
        const shippingData = {
            address: {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                address: document.getElementById('address').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value,
                zipCode: document.getElementById('zipCode').value,
                email: document.getElementById('email').value,
                saveAddress: document.getElementById('saveAddress').checked
            },
            method: currentShippingMethod,
            carrier: currentShippingCarrier,
            subtotal: cartSubtotal,
            tax: calculateTax(cartSubtotal),
            shipping: parseFloat(document.getElementById('shippingCost').textContent.replace('$', '')),
            total: parseFloat(document.getElementById('orderTotal').textContent.replace('$', ''))
        };
        
        // Save to localStorage and proceed
        localStorage.setItem('shippingData', JSON.stringify(shippingData));
        window.location.href = 'payment.html';
    }

    // Load cart items on page load
    document.addEventListener('DOMContentLoaded', function() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const orderItems = document.getElementById('orderItems');
        cartSubtotal = 0;
        
        if (cart.length === 0) {
            orderItems.innerHTML = '<p>Your cart is empty.</p>';
        } else {
            orderItems.innerHTML = '';
            cart.forEach(item => {
                const quantity = item.quantity || 1;
                const itemTotal = item.price * quantity;
                cartSubtotal += itemTotal;
                
                orderItems.innerHTML += `
                    <div class="cart-item">
                        <span>${item.name} × ${quantity}</span>
                        <span>$${itemTotal.toFixed(2)}</span>
                    </div>`;
            });
        }
        
        document.getElementById('subtotal').textContent = `$${cartSubtotal.toFixed(2)}`;
        document.getElementById('tax').textContent = `$${calculateTax(cartSubtotal).toFixed(2)}`;
        updateOrderTotal();
    });
   </script>
</body>

</html>
