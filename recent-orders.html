<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Recent Orders</title>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
   <div class="container mt-5">
      <h2>Recent Orders</h2>
      <a href="ProductManagement-17.html" class="btn btn-secondary mb-3">Back to Product Management</a>
      <button class="btn btn-primary mb-4" onclick="loadRecentOrders()">Load Orders</button>
      <div id="ordersList" class="row row-cols-1 g-4"></div>
   </div>

   <script>
      function loadRecentOrders() {
         const orderContainer = document.getElementById("ordersList");
         orderContainer.innerHTML = "";
         const orders = JSON.parse(localStorage.getItem("allOrders")) || [];

         if (orders.length === 0) {
            orderContainer.innerHTML = "<p>No recent orders found.</p>";
            return;
         }

         orders.forEach(order => {
            const itemsHTML = order.cartItems.map(item => `
               <li>${item.name} - $${item.price}</li>
            `).join("");

            orderContainer.innerHTML += `
               <div class="col">
                  <div class="p-3 border bg-light rounded">
                     <h5>Order Date: ${new Date(order.timestamp).toLocaleString()}</h5>
                     <ul>${itemsHTML}</ul>
                     <p><strong>Total Price:</strong> $${order.total}</p>
                     <p><strong>Shipping Address:</strong> ${order.shippingAddress}</p>
                     <p><strong>Carrier:</strong> ${order.carrier}</p>
                     <p><strong>Shipping Speed:</strong> ${order.speed}</p>
                  </div>
               </div>
            `;
         });
      }
   </script>
</body>

</html>