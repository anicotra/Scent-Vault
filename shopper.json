document.addEventListener("DOMContentLoaded", () => {
   const form = document.querySelector("form");

   form.addEventListener("submit", (event) => {
      event.preventDefault();

      const email = document.getElementById("email").value.trim();
      const name = document.getElementById("Name").value.trim();
      const phone = document.getElementById("phone").value.trim() || null;
      const age = parseInt(document.getElementById("age").value);
      const address = document.getElementById("address").value.trim();

      const emailRegex = /^[^\s@
      ]+@[^\s@
      ]+\.[^\s@
      ]+$/;

      if (!emailRegex.test(email)) {
         alert("Please enter a valid email address.");
         return;
      }

      if (name.length < 2) {
         alert("Please enter a valid name.");
         return;
      }

      if (isNaN(age) || age <= 0) {
         alert("Please enter a valid age.");
         return;
      }

      if (address === "") {
         alert("Please enter your address.");
         return;
      }

      const shopper = {
         email,
         name,
         phone,
         age,
         address
      };

      let shoppers = localStorage.getItem("shoppers");
      shoppers = shoppers ? JSON.parse(shoppers) : [];

      const existingShopper = shoppers.find((s) => s.email === email);
      if (existingShopper) {
         alert("This email is already registered.");
         return;
      }

      shoppers.push(shopper);
      localStorage.setItem("shoppers", JSON.stringify(shoppers));

      alert("Shopper information saved successfully!");

      form.reset();

      showThankYou();
   });
});

function showThankYou() {
   alert("Thank you for registering!");
}
